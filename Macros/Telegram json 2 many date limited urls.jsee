#include "common.js"
#include "lists.js"
// 导入公共函数定义

// ------------------------------------------------------------------------------------------------

// 🪴  0  使用场景说明

// 数据输入：从 Telegram 群聊/频道中导出的 .json 格式的数据
// 数据输出：筛选过后得到的网址文本行
// 数据特征：Telegram 群聊/频道的 .json 格式导出的数据

// ------------------------------------------------------------------------------------------------

// 🪴  1  筛选需要的参数信息

// 需要提取的参数信息为 date text href ，这三个就已经足够了
Extract_Lines("Regex", "(\"date\": |\"text\": |\"href\": )");	// 提取参数
Delete_Indent();												// 取消缩进
Replace_Words("Regex", "\\n(?!(\"date\": ))", "\\1");				// 保留除了 date 之前的所有换行
Extract_Lines("Normal", "date\": \"2022");						// 提取 2022 年的数据
// Extract_Lines("Normal","date\": \"2023-02");					// 提取 2023 年 2 月份的数据
Extract_Lines("Normal", "https://");							// 提取网址

// ------------------------------------------------------------------------------------------------

// 🪴  2  直接将网址从文本行中提取出来，然后覆盖已有的文本

Extract_URLs_From_Lines();								// 掐头去尾

// ------------------------------------------------------------------------------------------------

// 🪴  3  删除中文 & 网址黑名单

Delete_Lines("Regex", "[^\\x00-\\xff]");				// 删除中文
Delete_Blacklist_Telegram();							// Telegram 网址黑名单

// ------------------------------------------------------------------------------------------------

// 🪴  4  删除网址内部的定位信息

Delete_Parameters_And_Anchors();						// 删除网址内部的参数和锚点
Clean_Text();											// 删除重复行，按字母排序

// ------------------------------------------------------------------------------------------------

// 最终会生成很多文件，最后一个文件保留，其余中间文件删除
